window.loadAnimations=function(){initPlugins(),$(document).on("click",".js-diag-button-save",function(){});var e=$(".js-main-slider");e.on("init",function(e,t,i){var n=$(".m-slider__slide").eq(0).data("thumb");$(".js-background-main").css("background-image","url("+n+")")}),e.slick({vertical:!0,verticalSwiping:!0,dots:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3,speed:700,slidesToShow:1,slidesToScroll:1}),e.on("beforeChange",function(e,t,i,n){var a=$(".m-slider__slide").eq(n).data("thumb"),o=$(".js-background-main");o.animate({opacity:0},100,function(){o.css("background-image","url("+a+")").animate({opacity:1},200)})}),$(".js-events-slider").slick({dots:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3,speed:300,slidesToShow:1,slidesToScroll:1}),$(".js-items-top-slider").slick({arrows:!0,autoplay:!0,autoplaySpeed:4500,speed:1e3,slidesToShow:2,slidesToScroll:2,responsive:[{breakpoint:992,settings:{dots:!0}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1}}]}),$(".js-items-bottom-slider").slick({arrows:!0,autoplay:!0,autoplaySpeed:4500,speed:1e3,slidesToShow:3,slidesToScroll:3,responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2,dots:!0}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,dots:!0,arrows:!1}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1}}]}),$(".js-detail-slider").owlCarousel({items:1,dotsEach:!0,onInitialized:function(){var a=$(this.$element);this._items.forEach(function(e,t){var i=a.find(".owl-item:not(.cloned) .detail-slider__item").eq(t).data("thumb"),n=a.find(".owl-dot").eq(t);n.css({backgroundImage:"url("+i+")"})})}}),$(".js-garden-top-slider").slick({dots:!0,arrows:!0,autoplay:!0,autoplaySpeed:4e3,slidesToScroll:1,slidesToShow:1,adaptiveHeight:!0}),$(".js-garden-filters-slider").owlCarousel({margin:7,items:7,responsive:{0:{items:2,dots:!0,mouseDrag:!0,touchDrag:!0},450:{items:3,dots:!0,mouseDrag:!0,touchDrag:!0},600:{items:4,dots:!0,mouseDrag:!0,touchDrag:!0},768:{items:5,dots:!0,mouseDrag:!0,touchDrag:!0},992:{items:7,mouseDrag:!1,touchDrag:!1}}}),$(".js-garden-brands-slider").owlCarousel({margin:10,items:7,loop:!0,nav:!0,responsive:{0:{items:2,dots:!0,mouseDrag:!0,touchDrag:!0,nav:!1},450:{items:3,dots:!0,mouseDrag:!0,touchDrag:!0,nav:!1},600:{items:4,dots:!0,mouseDrag:!0,touchDrag:!0,nav:!1},768:{items:5,dots:!0,mouseDrag:!0,touchDrag:!0,nav:!1},992:{items:7,mouseDrag:!1,touchDrag:!1}}}),$(".js-garden-season-slider").slick({arrows:!0,autoplay:!0,autoplaySpeed:2e3,speed:300,slidesToShow:3,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2,dots:!0}},{breakpoint:768,settings:{slidesToShow:2,slidesToScroll:2,dots:!0}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,dots:!0,arrows:!1}}]}),$(".js-ajax-ad-filter").on("change",function(){var e=$(this).val();$.ajax({url:location.href,dataType:"html",type:"POST",data:{CODE:e},error:function(e){console.log("ERROR SENDAJAX")}}).done(function(e){console.log(e),$(".js-ajax").html($(e).find(".js-ajax").html()),$(".js-fancy").fancybox()})}),$(".js-fancy").fancybox(),$(document).on("click",".js-show-form",function(e){e.preventDefault();var t={template:$(this).attr("data-template")};SendAjax("SHOW_FORM",t,function(e){$modal=$("#Modal"),$modal.html(e.html),$modal.modal()})}),$("body").on("submit",".js-adve-form-submit",function(e){e.preventDefault();var t=$(this);if(!myValidateForm(t))return!1;var i=t.serializeObject();SendAjax("SEND_ADVE_FORM",i,function(e){console.log(e),t.closest("#Modal").find(".b-modal__text").html(e.html),t.remove()})}),$("body").on("submit",".js-diag-form-submit",function(e){e.preventDefault();var t=$(this);if(!diagnosticAccessValidateForm(t))return!1;var i=t.serializeObject();SendAjax("SEND_DIAG_FORM",i,function(e){t.closest("#Modal").find(".b-modal__text").html(e.html),t.remove()})})},$(document).ready(function(){window.loadAnimations()});var Common={init:function(){$(document).on("click",".js-scroll-to-element",function(e){var t=$(this).attr("href"),i=$(t),n=i.offset().top-110;$("html, body").animate({scrollTop:n},500,function(){location.hash=i.attr("id")}),e.preventDefault()}),$(document).on("click",".js-show-password",function(){var e=$(this),t=e.parent().find("input");e.hasClass("is-open")?t.attr("type","password"):t.attr("type","text"),e.toggleClass("is-open")}),$(document).on("change",".js-country",function(){var e=$(this).val();if(!e)return!1;var i=$("#region");SendAjax("GET_REGIONS",{countryId:e},function(e){var t=e;i.children().remove(),t.length?(i.append('<option value="">Выберите регион</option>'),$.each(t,function(e,t){i.append('<option value="'+t.ID+'">'+t.NAME+"</option>")})):i.append('<option value="">Выберите регион</option>'),i.removeClass("hide").trigger("refresh")})}),$(document).on("click","[data-goal]",function(){var e=$(this).data("goal");sendYandexGoal(e)})}};$(function(){Common.init()});var Header=function(){var e=function(){0<$(window).scrollTop()?$(".js-header").addClass("is-scroll"):$(".js-header").removeClass("is-scroll")};return{init:function(){e(),$(window).scroll(function(){e()}),$(window).resize(function(){e()})}}}();$(function(){Header.init()});var HeaderSearch=function(){var e=$(".js-search"),t=$(".js-search-input"),i=$(".js-search-loupe"),n=$(".js-header"),a=function(){Menu.close(),e.addClass("is-open"),i.addClass("is-active"),n.addClass("menu-is-open"),e.slideDown(),t.focus()},o=function(){e.is(".is-open")&&(e.removeClass("is-open"),i.removeClass("is-active"),n.removeClass("menu-is-open"),e.slideUp())};return{init:function(){$(document).on("click",".js-search-loupe, .js-search-close",function(){e.is(".is-open")?o():a()})},close:o}}();$(function(){HeaderSearch.init()});var Menu=function(){var e=$(".js-menu"),t=$(".js-header"),i=$(".js-menu-btn"),n=$(".js-masonry"),a=$(window),o=function(){HeaderSearch.close(),e.addClass("is-open"),i.addClass("is-active"),t.addClass("menu-is-open"),e.fadeIn(),992<=a.width()&&n.masonry({columnWidth:".item-masonry",itemSelector:".item-masonry"})},s=function(){e.is(".is-open")&&(e.removeClass("is-open"),i.removeClass("is-active"),t.removeClass("menu-is-open"),e.fadeOut())};return{init:function(){$(document).on("click",".js-menu-btn, .js-menu-close",function(){e.is(".is-open")?s():o()})},close:s}}();$(function(){Menu.init()});var History=function(){var e=$(".history__item"),o=$(".js-history-btn");return{init:function(){$(document).on("click",".js-history-btn",function(){var a=null;e.each(function(){var e=$(this),t=e.offset().top,i=t+e.height()+parseInt(e.css("margin-bottom")),n=o.offset().top+o.height()/2;t<=n&&n<=i&&(a=e)}),a.next().length&&$("html, body").animate({scrollTop:a.next().offset().top-$(".js-header").height()-o.height()/2},700,function(){})}),$(window).on("load scroll resize",function(){768<=window.innerWidth?($(".js-history-left").css({height:$(".js-history-items").height()+"px"}),$(".js-history-btn").stick_in_parent({offset_top:$(".header").height()+20})):($(".js-history-left").css({height:"auto"}),$(".js-history-btn").trigger("sticky_kit:detach"))})}}}();$(function(){History.init()});var OrderList={init:function(){$(document).on("click",".js-order-list-toggle",function(){var e=$(this),t=e.closest(".js-order-list"),i=e.closest(".js-order-list").find(".js-order-list-body");t.toggleClass("is-open"),i.slideToggle()})}};$(function(){OrderList.init()});var CatalogFilter={init:function(){$(".js-filter-toggle").on("click",function(){var e=$(this).next(".filter-list");$(this).closest(".filter__item").toggleClass("is-open"),e.slideToggle()}),$(document).click(function(e){$(e.target).is(".filter-tooltip")||$(e.target).closest(".js-filter-check").length||$(".filter-tooltip").fadeOut().remove()}),$(document).on("click",".js-filter-check",function(){/*var t=$(this),i=t.closest("form"),e=i.serializeObject(),n=i.attr("action"),a=i.attr("method");e.IS_AJAX="Y",e.set_filter="Y",$.ajax({url:n,dataType:"json",type:a,data:e}).done(function(e){i.attr("action", e.filter_url);$(".filter-tooltip").fadeOut().remove(),t.closest(".filter-list__item").prepend('<div class="filter-tooltip">найдено: '+e.count+' <button type="submit" class="filter-tooltip__btn js-submit-filter">Показать</button></div>'),$(".filter-tooltip").fadeIn(),i.find(".js-filter-count").html(e.count)})*/}),$(document).on("click",".js-submit-filter",function(e){e.preventDefault(),$("#set_filter").click()}),$(".js-filter-form button[type=submit]").on("click",function(e){e.preventDefault(),$("#set_filter").click()})}};$(function(){$(".filter").length&&CatalogFilter.init()});var InfoDetail=function(){var e=function(){var e=window.innerWidth,t=$(".js-info-detail-right").height();768<=e&&t<465?($(".js-info-detail-share").addClass("-hide"),$(".js-info-detail-share-bottom").addClass("-show")):768<=e&&465<=t?($(".js-info-detail-left").css({height:$(".js-info-detail-right").height()+"px"}),$(".js-info-detail-share").stick_in_parent({offset_top:$(".header").height()+20})):($(".js-info-detail-left").css({height:"auto"}),$(".js-info-detail-share").trigger("sticky_kit:detach"))};return{init:function(){e(),$(window).on("scroll, resize",function(){e()})}}}();$(function(){$(".info-detail").length&&InfoDetail.init()});var SliderMobile=function(){var i=!1,n=null,a=function(e){e.slick({dots:!0,infinite:!0,arrows:!1,autoplay:!0,autoplaySpeed:2e3}),i=!0};return{init:function(e){n=e,$.each(n,function(e,t){$(window).width()<768&&a(t),$(window).resize(function(){$(window).width()<=768?i?$.each(n,function(e,t){t.slick("setPosition")}):$.each(n,function(e,t){a(t)}):(i&&$.each(n,function(e,t){t.slick("unslick")}),i=!1)})})}}}();$(function(){var e=[$(".js-info-detail-slider")];SliderMobile.init(e)});var CatalogDetail=function(){var i=$(".js-detail-filling"),n=$(".js-detail-packing"),a=$(".js-detail-quantity"),o=$(".js-detail-offer"),s=$(".js-detail-offer-tab"),t=$(".js-detail-application-tab"),r=$("#Modal"),l=function(){a.val(1),c(1)},c=function(e){var t=$(".js-detail-packing.is-active"),i=t.data("value"),n=t.data("weight"),a=t.data("price"),o=f(i*n*e),s=f(a*e),r=f(i*e);t.find(".js-detail-weight").text(o),t.find(".js-detail-price").text(s),t.find(".js-detail-count").text(r),EdostCalcDetail.changeData({RATIO:t.data("value"),WEIGHT:t.data("weight"),PRICE:t.find(".js-detail-price").text(),COUNT:e,WIDTH:t.data("width"),HEIGHT:t.data("height"),LENGTH:t.data("length")})},d=function(){SendAjax("RECOUNT_BASKET",{},function(e){$(".js-basket-count").html(e)})},u=function(){SendAjax("RECOUNT_DELAY",{},function(e){$(".js-delay-count").html(e)})},f=function(e){return Math.round(100*parseFloat(e))/100};return{init:function(){$(document).on("click",".js-detail-offer",function(){var e=$(this),t=e.data("offer");l(),o.removeClass("is-active"),e.addClass("is-active"),s.removeClass("is-active"),s.filter("[data-offer="+t+"]").addClass("is-active"),i.removeClass("is-active"),i.filter("[data-offer="+t+"]").addClass("is-active"),n.removeClass("is-active"),i.filter("[data-offer="+t+"]").find(".js-detail-packing").eq(0).addClass("is-active"),EdostCalcDetail.changeData({RATIO:i.filter("[data-offer="+t+"]").find(".js-detail-packing").data("value"),WEIGHT:i.filter("[data-offer="+t+"]").find(".js-detail-packing").data("weight"),PRICE:i.filter("[data-offer="+t+"]").find(".js-detail-price").text(),COUNT:1,WIDTH:i.filter("[data-offer="+t+"]").find(".js-detail-packing").data("width"),HEIGHT:i.filter("[data-offer="+t+"]").find(".js-detail-packing").data("height"),LENGTH:i.filter("[data-offer="+t+"]").find(".js-detail-packing").data("length")})}),$(document).on("click",".js-detail-packing",function(){var e=$(this);l(),n.removeClass("is-active"),e.addClass("is-active"),EdostCalcDetail.changeData({RATIO:e.data("value"),WEIGHT:e.data("weight"),PRICE:e.find(".js-detail-price").text(),COUNT:1,WIDTH:e.data("width"),HEIGHT:e.data("height"),LENGTH:e.data("length")})}),$(document).on("click",".js-detail-quantity-up",function(){var e=a.val(),t=+e+1;e<99999&&(a.val(t),c(t))}),$(document).on("click",".js-detail-quantity-down",function(){var e=a.val(),t=+e-1;1<e&&(a.val(t),c(t))}),$(document).on("change",".js-detail-quantity",function(){var e=parseInt(a.val());e<1||""===e||"undefined"===e||"NULL"===e||!e||(0^e)!==e||99999<e?l():c(e)}),$(document).on("click",".js-add-basket",function(){var e=o.filter(".is-active").data("offer"),t=n.filter(".is-active").data("value"),i=a.val();SendAjax("ADD2BASKET",{offer:e,quantity:t*i},function(e){d(),r.html(e.html),r.modal()})}),$(document).on("click",".js-add-delay",function(){var e=o.filter(".is-active").data("offer"),t=n.filter(".is-active").data("value"),i=a.val();SendAjax("ADD2DELAY",{offer:e,quantity:t*i},function(e){u(),r.html(e.html),r.modal()})}),$(document).on("change",".js-detail-application",function(){var e=$(this).val();e&&(t.removeClass("is-active"),t.filter("[data-id="+e+"]").addClass("is-active"))})}}}();$(function(){CatalogDetail.init()});var Profile={init:function(){$(document).on("change keydown keypress keyup",".js-profile-login",function(){var e=$(this).val();$(".js-profile-email").val(e)})}};$(function(){Profile.init()});var Order=function(){$(".js-step-tab"),$(".js-next-step"),$(".js-country-order");var a=function(e){e.removeClass("-error"),$(".js-styler").removeClass("-error");var n=!0;return e.each(function(e,t){var i=$(t);i.is("select")&&""==i.find("option").filter(":selected").val()?($(t).addClass("-error"),$(t).parent().addClass("-error"),n=!1):""!=i.val()||i.is("select")||i.is("div")||($(t).addClass("-error"),n=!1),"checkbox"==i.attr("type")&&0==i.prop("checked")&&($(t).addClass("-error"),n=!1),"EMAIL"===i.attr("name")&&""===i.val()?i.attr("data-content","Обязательное поле"):"EMAIL"!==i.attr("name")||isValidEmailAddress(i.val())||(i.attr("data-content","Поле заполнено не верно"),$(t).addClass("-error"),n=!1)}),n};return{init:function(){$(document).on("click",".js-step-tab",function(){var e=$(this),t=$(".order__step.is-open"),i=t.data("name");a(t.find(".req"))&&!e.closest(".order__step").hasClass("is-disabled")&&(t.addClass("is-complete").removeClass("is-open"),e.closest(".order__step").removeClass("is-complete").addClass("is-open"),$(".js-styler").trigger("refresh"),$("input[name="+i+"]").val("Y"),$("input[name=step_current]").val($(".order__step.is-open").data("name")))}),$(document).on("click",".js-next-step",function(){var e=$(this),t=$(".order__step.is-open"),i=t.data("name");if(a(t.find(".req"))){t.addClass("is-complete").removeClass("is-open"),e.closest(".order__step").next().removeClass("is-complete").removeClass("is-disabled").addClass("is-open"),$(".js-styler").trigger("refresh");var n=e.data("order-goal");sendYandexGoal(n),$("input[name="+i+"]").val("Y"),$("input[name=step_current]").val($(".order__step.is-open").data("name"))}}),$(document).on("change",".js-country-order",function(){var e=$(this).val();if(!e)return!1;var i=$("#region");SendAjax("GET_REGIONS_ORDER",{countryName:e},function(e){var t=e;i.children().remove(),t.length?(i.append('<option value="">Выберите регион</option>'),$.each(t,function(e,t){i.append('<option value="'+t.NAME+'">'+t.NAME+"</option>")})):i.append('<option value="">Выберите регион</option>'),i.removeClass("hide").trigger("refresh")})})}}}();$(function(){$(".order").length&&Order.init()});var BuyFixed=function(){var e=function(){var e=$(".js-buy-container").position().top;$(".js-buy-scroll").affix({offset:e})},t=function(){$(".js-buy-container").height($(".js-buy-scroll").height())};return{init:function(){t(),e(),$(window).on("scroll, resize",function(){t(),e()})}}}();$(function(){$(".buy").length&&BuyFixed.init()});var AdvertisingDownload={init:function(){$(".js-adv-download").on("click",function(){var e={FILE_NAME:$(this).attr("download"),ID:$(this).attr("data-id")};SendAjax("ADVERTISING_DOWNLOAD",e,function(e){})})}};$(function(){AdvertisingDownload.init()});var EdostCalcDetail=function(){var i,n,a=$(".js-delivery-form"),t=$(".js-delivery-content"),o=$(".js-delivery-ajax"),s=function(){var e=a.serializeObject();SendAjax("LOAD_CITIES",e,function(e){$("select.js-delivery-city").html(e.html),a.find("input[name=CITY]").val($("select.js-delivery-city option:selected").val()),l(),r()})},r=function(){var e=a.serializeObject();SendAjax("GET_EDOST_DATA",e,function(e){o.html(e.html),"pickup"==a.find("select[name=TYPE]").val()&&e.offices.features.length&&c(e.offices),l()})},l=function(){setTimeout(function(){initPlugins(),$(".js-styler").trigger("refresh")},150)},c=function(e){n=new ymaps.Map("delivery-map",{center:e.features[0].geometry.coordinates,zoom:10,controls:["fullscreenControl","zoomControl"]}),(i=new ymaps.ObjectManager({clusterize:!0})).objects.options.set({iconContentLayout:ymaps.templateLayoutFactory.createClass('<div class="price">$[properties.iconContent]</div>')}),i.objects.events.add("click",function(e){var t=e.get("objectId");$(".js-select-pickup select").val(t),l()}),i.add(e),n.geoObjects.add(i)};return{init:function(){$(document).on("click",".js-delivery-toggle",function(e){t.hasClass("is-active")||(r(),l()),t.toggleClass("is-active")}),$(document).on("change",".js-delivery-region",function(e){$(this).val()&&s()}),$(document).on("change",".js-delivery-city",function(e){$(this).val()&&(a.find("input[name=CITY]").val($(this).val()),r())}),$(document).on("change",".js-delivery-type",function(e){$(this).val()&&r()}),$(document).on("click",".js-delivery-close",function(e){t.toggleClass("is-active")}),$(document).on("change",".js-select-pickup",function(e){var t=$(this).val();t&&(n.setZoom(14),i.objects.balloon.open(t))})},changeData:function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.find("input[name="+t+"]").val(e[t]);$(".js-delivery-content").hasClass("is-active")&&r()}}}();$(function(){EdostCalcDetail.init()});var registerModal={init:function(){$("body").on("change","select.js-user-type",function(){var e=$(".js-ul-show-only");e.length&&(2==$(this).val()?(e.slideDown(300),e.find("select").addClass("req-select").trigger("refresh"),e.find("input").addClass("req")):(e.slideUp(300),e.find("select").removeClass("req-select"),e.find("input").removeClass("req")))}).on("change","select.js-company-type",function(){var e=$(".js-ul-company-show-only");e.length&&(4==$(this).val()?(e.slideDown(300),e.find('input[name="UF_KPP"]').addClass("req")):(e.slideUp(300),e.find('input[name="UF_KPP"]').removeClass("req")))})}};$(function(){registerModal.init()}),window.blockSlider={currentPage:1,currentPageClass:"block-slider__current",wrapperClass:".block-slider__wrapper",pageClass:".block-slider__page",init:function(){var e=$(this.wrapperClass);e.length&&(this.addHandlers(),this.switchPage(1),$(e).css("height",$(blockSlider.getCurrentPage()).css("width")))},switchPage:function(i){blockSlider.currentPage=i,$(blockSlider.getCurrentPage()).css({position:"static",transform:"none"}),$(blockSlider.getOtherPages()).each(function(e,t){var i=$(t).attr("data-num")-blockSlider.currentPage;$(t).css({transform:"translateX("+100*i+"%)",position:"absolute"})}),$("[data-bs-visible]").each(function(e,t){$(t).attr("data-bs-visible")!=i?$(t).css("display","none"):$(t).css("display","block")})},addHandlers:function(){$("[data-bs-page]").click(function(e){var t=$(e.target).attr("data-bs-page");$(window.blockSlider.pageClass+"[data-num="+t+"]");window.blockSlider.switchPage(t)})},getCurrentPage:function(){return $(this.pageClass+"[data-num="+blockSlider.currentPage+"]")},getOtherPages:function(){return $(this.pageClass+":not([data-num="+blockSlider.currentPage+"])")}},$(function(){$("body").on("keyup",'[data-filter="text"]',function(e){$(e.target).inputmask({regex:"[а-яА-ЯёЁ]{2,24}"})})});